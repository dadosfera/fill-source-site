<nb-card [nbSpinner]="loading">
  <nb-card-header>
    <div class="header-block">
      <app-hello-user></app-hello-user>

      <nb-actions size="small">
        <nb-action
          (click)="goToCreate()"
          nbTooltip="Criar novo source"
          icon="plus-circle-outline"
        ></nb-action>
        <nb-action
          (click)="supabaseService.signOut()"
          nbTooltip="Fazer logout"
          nbTooltipPlacement="left"
          icon="log-out-outline"
          class="last-action"
        ></nb-action>
      </nb-actions>
    </div>

    <div class="search-block">
      <nb-form-field>
        <nb-icon nbPrefix icon="search"></nb-icon>
        <input
          type="text"
          nbInput
          fullWidth
          placeholder="Pesquisar sources cadastradas"
          [formControl]="searchControl"
          id="input-test"
        />
      </nb-form-field>
    </div>
  </nb-card-header>

  <div class="list-block">
    <nb-list *ngIf="allSources && allSources.length">
      <nb-list-item *ngFor="let item of filteredSources">
        <app-source-list-item
          [item]="item"
          (sourceDeleted)="onDeletedSource($event)"
        ></app-source-list-item>
      </nb-list-item>
    </nb-list>
  </div>

  <nb-card-body
    *ngIf="
      filteredSources &&
      filteredSources.length === 0 &&
      !loading &&
      allSources.length > 0
    "
  >
    <div class="no-data-block">
      <p id="text" class="p1">Sem itens para o termo de busca</p>
    </div>
  </nb-card-body>

  <nb-card-body *ngIf="allSources.length === 0 && !loading">
    <app-no-data></app-no-data>
  </nb-card-body>
</nb-card>
